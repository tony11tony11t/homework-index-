<html>
    <head>
        <meta charset="utf-8">
		<link rel="stylesheet" href="jquery.mobile-1.4.5.min.css" type="text/css">
		<link rel="stylesheet" href="bar_style.css" type="text/css">
		<meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
		<script src="jquery.min.js"  type="text/javascript"></script>  
		<script src="jquery.mobile-1.4.5.min.js" type="text/javascript"></script>
		
		<script>
			$(function(){
				//檢查登入資訊以及顯示結果
				$(".login-btn-login").on("click",function(){
					 $(".result").html("");
				});
				$("#login").on("click",function(){
					var username=$("#username").val();
					var password=$("#password").val();
					$.ajax({
                        url:"http://192.168.1.105/mochi/Check_LoginData.php",
                        type:"POST",
                        datatype:"JSON",
                        data:{"username":username,"password":password},
                        success(msg){
                            var result=JSON.parse(msg);
							console.log(result.result);
                            if(result.result=="SUCCESS"){
                                $(".result").html("登入成功");
							}
                            else
                                $(".result").html("帳號或密碼錯誤");
                        },
                        error(msg){
                            alert(msg);
                        }
                    });
				});
				
				//註冊帳號
				$("#registered").on("click",function(){
					var username=$("#rgt_username").val();
					var password=$("#rgt_password").val();
					var name=$("#rgt_name").val();
					
					if(username==""||password==""||name==""){
						 $(".result").html("請檢查是否有空白");
					}
					else{
					$.ajax({
                        url:"http://192.168.1.105/mochi/memberdata/Insert_Member.php",
                        type:"POST",
                        datatype:"JSON",
                        data:{"username":username,"password":password,"nickname":name},
                        success(msg){
                            var result=JSON.parse(msg);
							console.log(result.result);
                            if(result.result=="SUCCESS"){
                                $(".result").html("新增會員成功");
							} 
							else
								$(".result").html("此信箱已經申請過囉");
                        }, 
                        error(msg){
                            alert(msg);
                        }
                    });
					}
				});
				
				
				
			})
			
			
		</script>
		
	</head>
    <body>
		<div data-role="page" id="login-page-login" data-theme="f">	
			<div data-role="content" class="login_content">
				<div class="login-div-window" id="login_window">
					<div class="login-div-title">登入</div>
					<div class="login-div-content">
						<form class="login-form-login">
							
							<span class="login-span-txt">信箱</span><input type="text" class="login-txt-field" id="username"/>
							<span class="login-span-txt">密碼</span><input type="text" class="login-txt-field" id="password"/>
						</form>
						<p class="result"></p>
						<div class="login-btn-bar">
						<a class="login-btn-login" >忘記密碼</a>
						<a class="login-btn-login" id="login">登入</a>
						<a class="login-btn-login" href="#login-page-registered" data-transition="flip" >註冊</a>
						</div>
					</div>	
				</div>
			</div>
		</div>
		
		<div data-role="page" id="login-page-registered" data-theme="f">	
			<div data-role="content" class="login_content">
				<div class="login-div-window" id="registered_window">
					<div class="login-div-title">註冊</div>
					<div class="login-div-content">
						<form class="login-form-login">
							
							<span class="login-span-txt">信箱</span><input type="text" class="login-txt-field" id="rgt_username"/>
							<span class="login-span-txt">密碼</span><input type="text" class="login-txt-field" id="rgt_password"/>
							<span class="login-span-txt">暱稱</span><input type="text" class="login-txt-field" id="rgt_name"/>
						</form>
						<p class="result"></p>
						<div class="login-btn-bar">
						<a class="login-btn-login register_btn" href="#login-page-login" data-transition="flip" >取消</a>
						<a class="login-btn-login register_btn" id="registered">註冊</a>
						</div>
					</div>	
				</div>
			</div>
		</div>
	
	</body>
</html>